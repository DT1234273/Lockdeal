{"ast":null,"code":"import{useState}from'react';import{toast}from'react-toastify';import PageHeader from'../../components/PageHeader';import{groupAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VerifyOTP=()=>{const[groupId,setGroupId]=useState('');const[otp,setOtp]=useState('');const[isVerifying,setIsVerifying]=useState(false);const[verificationSuccess,setVerificationSuccess]=useState(false);const[groupDetails,setGroupDetails]=useState(null);const handleVerify=async e=>{e.preventDefault();if(!groupId||!otp){toast.error('Please enter both Group ID and OTP');return;}if(otp.length!==6||!/^\\d+$/.test(otp)){toast.error('OTP must be 6 digits');return;}setIsVerifying(true);try{// Verify the OTP with the backend\nconst result=await groupAPI.verifyPickup(groupId,otp);setGroupDetails(result.group);setVerificationSuccess(true);toast.success('Pickup verified successfully!');}catch(error){toast.error(error.detail||'Verification failed. Please check Group ID and OTP.');}finally{setIsVerifying(false);}};const handleReset=()=>{setGroupId('');setOtp('');setVerificationSuccess(false);setGroupDetails(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8 animate-fade-in\",children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Verify Pickup OTP\",subtitle:\"Confirm customer pickup with OTP\",showBackButton:true,backButtonPath:\"/seller/dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md mx-auto bg-white rounded-lg shadow-md p-6 mt-6\",children:!verificationSuccess?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleVerify,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"groupId\",className:\"form-label\",children:\"Group ID\"}),/*#__PURE__*/_jsx(\"input\",{id:\"groupId\",type:\"text\",className:\"form-input\",value:groupId,onChange:e=>setGroupId(e.target.value),placeholder:\"Enter group ID\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"otp\",className:\"form-label\",children:\"6-Digit OTP\"}),/*#__PURE__*/_jsx(\"input\",{id:\"otp\",type:\"text\",maxLength:\"6\",className:\"form-input text-center text-2xl tracking-widest\",value:otp,onChange:e=>setOtp(e.target.value.replace(/[^0-9]/g,'')),placeholder:\"------\",required:true}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Ask the customer to provide the OTP they received for pickup verification.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary w-full\",disabled:isVerifying,children:isVerifying?'Verifying...':'Verify Pickup'})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 p-4 rounded-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-green-400\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-green-800\",children:\"Pickup verified successfully\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 text-sm text-green-700\",children:/*#__PURE__*/_jsx(\"p\",{children:\"The customer has successfully picked up their order.\"})})]})]})}),groupDetails&&/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-md p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-900 mb-2\",children:\"Order Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Product:\"}),/*#__PURE__*/_jsx(\"span\",{children:groupDetails.product.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Quantity:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[groupDetails.total_quantity,\" \",groupDetails.product.unit]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Total Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",groupDetails.total_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Customer:\"}),/*#__PURE__*/_jsx(\"span\",{children:groupDetails.customer_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:\"Pickup Time:\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date().toLocaleString('en-IN')})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleReset,className:\"btn-primary w-full\",children:\"Verify Another Pickup\"})]})})]});};export default VerifyOTP;","map":{"version":3,"names":["useState","toast","PageHeader","groupAPI","jsx","_jsx","jsxs","_jsxs","VerifyOTP","groupId","setGroupId","otp","setOtp","isVerifying","setIsVerifying","verificationSuccess","setVerificationSuccess","groupDetails","setGroupDetails","handleVerify","e","preventDefault","error","length","test","result","verifyPickup","group","success","detail","handleReset","className","children","title","subtitle","showBackButton","backButtonPath","onSubmit","htmlFor","id","type","value","onChange","target","placeholder","required","maxLength","replace","disabled","fill","viewBox","fillRule","d","clipRule","product","name","total_quantity","unit","total_price","toFixed","customer_name","Date","toLocaleString","onClick"],"sources":["E:/market_sell/frontend/src/pages/seller/VerifyOTP.js"],"sourcesContent":["import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport PageHeader from '../../components/PageHeader';\nimport { groupAPI } from '../../services/api';\n\nconst VerifyOTP = () => {\n  const [groupId, setGroupId] = useState('');\n  const [otp, setOtp] = useState('');\n  const [isVerifying, setIsVerifying] = useState(false);\n  const [verificationSuccess, setVerificationSuccess] = useState(false);\n  const [groupDetails, setGroupDetails] = useState(null);\n\n  const handleVerify = async (e) => {\n    e.preventDefault();\n    \n    if (!groupId || !otp) {\n      toast.error('Please enter both Group ID and OTP');\n      return;\n    }\n\n    if (otp.length !== 6 || !/^\\d+$/.test(otp)) {\n      toast.error('OTP must be 6 digits');\n      return;\n    }\n\n    setIsVerifying(true);\n    try {\n      // Verify the OTP with the backend\n      const result = await groupAPI.verifyPickup(groupId, otp);\n      setGroupDetails(result.group);\n      setVerificationSuccess(true);\n      toast.success('Pickup verified successfully!');\n    } catch (error) {\n      toast.error(error.detail || 'Verification failed. Please check Group ID and OTP.');\n    } finally {\n      setIsVerifying(false);\n    }\n  };\n\n  const handleReset = () => {\n    setGroupId('');\n    setOtp('');\n    setVerificationSuccess(false);\n    setGroupDetails(null);\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 animate-fade-in\">\n      <PageHeader\n        title=\"Verify Pickup OTP\"\n        subtitle=\"Confirm customer pickup with OTP\"\n        showBackButton={true}\n        backButtonPath=\"/seller/dashboard\"\n      />\n      <div className=\"max-w-md mx-auto bg-white rounded-lg shadow-md p-6 mt-6\">\n        \n        {!verificationSuccess ? (\n          <form onSubmit={handleVerify} className=\"space-y-6\">\n            <div>\n              <label htmlFor=\"groupId\" className=\"form-label\">\n                Group ID\n              </label>\n              <input\n                id=\"groupId\"\n                type=\"text\"\n                className=\"form-input\"\n                value={groupId}\n                onChange={(e) => setGroupId(e.target.value)}\n                placeholder=\"Enter group ID\"\n                required\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"otp\" className=\"form-label\">\n                6-Digit OTP\n              </label>\n              <input\n                id=\"otp\"\n                type=\"text\"\n                maxLength=\"6\"\n                className=\"form-input text-center text-2xl tracking-widest\"\n                value={otp}\n                onChange={(e) => setOtp(e.target.value.replace(/[^0-9]/g, ''))}\n                placeholder=\"------\"\n                required\n              />\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Ask the customer to provide the OTP they received for pickup verification.\n              </p>\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"btn-primary w-full\"\n              disabled={isVerifying}\n            >\n              {isVerifying ? 'Verifying...' : 'Verify Pickup'}\n            </button>\n          </form>\n        ) : (\n          <div className=\"space-y-6\">\n            <div className=\"bg-green-50 p-4 rounded-md\">\n              <div className=\"flex\">\n                <div className=\"flex-shrink-0\">\n                  <svg className=\"h-5 w-5 text-green-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n                <div className=\"ml-3\">\n                  <h3 className=\"text-sm font-medium text-green-800\">Pickup verified successfully</h3>\n                  <div className=\"mt-2 text-sm text-green-700\">\n                    <p>The customer has successfully picked up their order.</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {groupDetails && (\n              <div className=\"border rounded-md p-4\">\n                <h3 className=\"font-medium text-gray-900 mb-2\">Order Details</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Product:</span>\n                    <span>{groupDetails.product.name}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Quantity:</span>\n                    <span>{groupDetails.total_quantity} {groupDetails.product.unit}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Total Amount:</span>\n                    <span>â‚¹{groupDetails.total_price.toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Customer:</span>\n                    <span>{groupDetails.customer_name}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-500\">Pickup Time:</span>\n                    <span>{new Date().toLocaleString('en-IN')}</span>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <button\n              onClick={handleReset}\n              className=\"btn-primary w-full\"\n            >\n              Verify Another Pickup\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default VerifyOTP;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}