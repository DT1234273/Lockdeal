{"ast":null,"code":"import _objectSpread from\"E:/lockdeal/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{toast}from'react-toastify';import PageHeader from'../../components/PageHeader';import{useAuth}from'../../context/AuthContext';import{groupAPI}from'../../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ViewGroups=()=>{var _user$seller2;const{user}=useAuth();const[groups,setGroups]=useState([]);const[isLoading,setIsLoading]=useState(true);const[activeTab,setActiveTab]=useState('locked');const[selectedGroup,setSelectedGroup]=useState(null);const[showAcceptModal,setShowAcceptModal]=useState(false);const[isAccepting,setIsAccepting]=useState(false);const[availableGroups,setAvailableGroups]=useState([]);const[isLoadingAvailable,setIsLoadingAvailable]=useState(true);const[showDetailsModal,setShowDetailsModal]=useState(false);const navigate=useNavigate();useEffect(()=>{console.log('ViewGroups component mounted');console.log('Current user:',user);fetchGroups();fetchAvailableGroups();},[]);// Define filteredGroups before using it in useEffect\nconst filteredGroups=groups.filter(group=>{var _group$product;// Check if the product belongs to the current seller\nconst isOwnProduct=(user===null||user===void 0?void 0:user.id)&&((_group$product=group.product)===null||_group$product===void 0?void 0:_group$product.seller_id)===user.id;if(activeTab==='locked'){// For locked tab, show all seller's own products that are not accepted/picked up\n// OR show locked groups from other sellers\nreturn isOwnProduct&&!group.is_accepted&&!group.is_picked_up||group.locked_at&&!group.is_accepted&&!group.is_picked_up;}if(activeTab==='accepted'){// For accepted tab, show groups that are accepted, not picked up, and have at least 1 member\nreturn group.is_accepted&&!group.is_picked_up&&group.members>0;}if(activeTab==='completed'){// For completed tab, show groups that are picked up OR have 0 members\nreturn group.is_picked_up||group.is_accepted&&group.members===0;}if(activeTab==='available')return false;// Available groups are handled separately\nreturn true;});// Add a useEffect to monitor groups state changes\nuseEffect(()=>{console.log('Groups state updated:',groups);console.log('Active tab:',activeTab);console.log('Filtered groups:',filteredGroups);},[groups,activeTab,filteredGroups]);const fetchGroups=async()=>{setIsLoading(true);try{console.log('Fetching groups for seller...');const data=await groupAPI.getMyGroups();console.log('Groups data received:',data);setGroups(data);}catch(error){const errorMessage=error.detail||'Failed to load groups';toast.error(errorMessage);console.error('Error fetching groups:',error);}finally{setIsLoading(false);}};const fetchAvailableGroups=async()=>{setIsLoadingAvailable(true);try{console.log('Fetching available groups...');const data=await groupAPI.getAvailableGroups();console.log('Available groups data received:',data);// Filter out groups that are already accepted\nconst filteredData=data.filter(group=>!group.is_accepted);console.log('Filtered available groups (excluding accepted):',filteredData);setAvailableGroups(filteredData);}catch(error){const errorMessage=error.detail||'Failed to load available groups';toast.error(errorMessage);console.error('Error fetching available groups:',error);}finally{setIsLoadingAvailable(false);}};const handleAcceptGroup=group=>{setSelectedGroup(group);// Check if group is already accepted\nif(group.is_accepted){toast.info('This group is already accepted');return;}// If group meets criteria, accept directly without showing modal\nif(group.members>=10||group.total_price>=1000){confirmAcceptGroup();}else{// For regular locked groups, show confirmation modal\nsetShowAcceptModal(true);}};const handleViewDetails=group=>{setSelectedGroup(group);setShowDetailsModal(true);};const handleAcceptAvailableGroup=async groupId=>{try{// Check if the group meets the criteria\nconst group=selectedGroup||availableGroups.find(g=>g.id===groupId);if(!group){toast.error('Group not found');return;}// Check if the group is already accepted\nif(group.is_accepted){toast.info('This group is already accepted');fetchGroups();fetchAvailableGroups();setShowDetailsModal(false);setActiveTab('accepted');return;}// First lock the group if not already locked\nif(!group.locked_at){try{await groupAPI.lockGroup(groupId);console.log('Group locked successfully');}catch(lockError){var _lockError$detail;// If the group is already locked, we can proceed to accept it\nif(!((_lockError$detail=lockError.detail)!==null&&_lockError$detail!==void 0&&_lockError$detail.includes('already locked'))){// If it's another error, show it and stop\nconst errorMessage=lockError.detail||'Failed to lock group';toast.error(errorMessage);console.error('Error locking group:',lockError);return;}}}else{console.log('Group was already locked, proceeding to accept');}// Then accept the group\nawait groupAPI.acceptGroup(groupId);toast.success('Group accepted successfully');setShowAcceptModal(false);fetchGroups();fetchAvailableGroups();setShowDetailsModal(false);setActiveTab('accepted');}catch(error){const errorMessage=error.detail||'Failed to accept group';toast.error(errorMessage);console.error('Error accepting group:',error);}};const confirmAcceptGroup=async()=>{if(!selectedGroup)return;// Check if the group is already accepted\nif(selectedGroup.is_accepted){toast.info(\"Group for \".concat(selectedGroup.product.name,\" is already accepted\"));setShowAcceptModal(false);setActiveTab('accepted');return;}setIsAccepting(true);try{await groupAPI.acceptGroup(selectedGroup.id);toast.success('Group accepted successfully');// Update the group status locally without showing popup\nsetGroups(prevGroups=>{return prevGroups.map(group=>{if(group.id===selectedGroup.id){return _objectSpread(_objectSpread({},group),{},{is_accepted:true,accepted_at:new Date().toISOString()});}return group;});});// Refresh all groups to ensure the accepted group is correctly displayed\nfetchGroups();// Change active tab to 'accepted'\nsetActiveTab('accepted');toast.success(\"Group for \".concat(selectedGroup.product.name,\" accepted successfully!\"));setShowAcceptModal(false);}catch(error){toast.error(error.detail||'Failed to accept group');}finally{setIsAccepting(false);}};const handleVerifyPickup=group=>{// Navigate to customer orders page for order confirmation\nnavigate('/seller/customer-orders');};const formatDate=dateString=>{if(!dateString)return'Not locked yet';const date=new Date(dateString);return date.toLocaleDateString('en-IN',{year:'numeric',month:'short',day:'numeric'});};// Debug groups data\nuseEffect(()=>{console.log('ViewGroups - Groups data:',groups);console.log('ViewGroups - Filtered groups:',filteredGroups);console.log('ViewGroups - Active tab:',activeTab);},[groups,filteredGroups,activeTab]);// Debug user state\nuseEffect(()=>{var _user$seller,_storedUser$seller;console.log('ViewGroups - Current user state:',user);console.log('ViewGroups - Seller paid status:',user===null||user===void 0?void 0:(_user$seller=user.seller)===null||_user$seller===void 0?void 0:_user$seller.paid_99);// Check localStorage as well\nconst storedUser=JSON.parse(localStorage.getItem('user'));console.log('ViewGroups - User from localStorage:',storedUser);console.log('ViewGroups - Seller paid status from localStorage:',storedUser===null||storedUser===void 0?void 0:(_storedUser$seller=storedUser.seller)===null||_storedUser$seller===void 0?void 0:_storedUser$seller.paid_99);},[user]);// If seller hasn't paid the fee, show access denied screen\nif(!(user!==null&&user!==void 0&&(_user$seller2=user.seller)!==null&&_user$seller2!==void 0&&_user$seller2.paid_99)){console.log('ViewGroups - Access denied: seller has not paid fee');return/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 border border-gray-200 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block p-4 rounded-full bg-red-100 text-red-600 mb-6\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-16 w-16\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M12 15v2m0 0v2m0-2h2m-2 0H9m3-4V8m-3 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-4\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600 mb-8 max-w-md mx-auto\",children:\"You need to pay the seller onboarding fee of \\u20B999 to access group management features.\"}),/*#__PURE__*/_jsxs(Link,{to:\"/seller/dashboard\",className:\"inline-flex items-center justify-center px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-2\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\"})}),\"Go to Dashboard & Pay Fee\"]})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8 animate-fade-in\",children:[/*#__PURE__*/_jsx(PageHeader,{title:\"Manage Groups\",subtitle:\"View and manage your product groups\",backButtonPath:\"/seller/dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 mb-6\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('locked'),className:\"pb-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='locked'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Locked Groups\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('accepted'),className:\"pb-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='accepted'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Accepted Groups\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('completed'),className:\"pb-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='completed'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Completed Groups\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('available'),className:\"pb-4 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='available'?'border-primary-500 text-primary-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Available Groups\"})]})}),activeTab==='available'&&/*#__PURE__*/_jsx(_Fragment,{children:isLoadingAvailable?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loading available groups...\"})}):availableGroups.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 p-4 rounded-lg mb-6\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Note:\"}),\" These are groups created by customers that you can accept and fulfill.\",/*#__PURE__*/_jsx(\"br\",{}),\"Groups are visible when they meet at least one of these criteria:\",/*#__PURE__*/_jsx(\"br\",{}),\"1. The group has \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"10 or more members\"}),/*#__PURE__*/_jsx(\"br\",{}),\"2. The total order value is \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u20B91000 or more\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:availableGroups.map(group=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:group.product.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-1 rounded-full \".concat(group.members>=10||group.total_price>=1000?'bg-green-100 text-green-800':'bg-yellow-100 text-yellow-800'),children:group.members>=10||group.total_price>=1000?'Ready to Accept':'Available'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm text-gray-600 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Price:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",group.product.price,\" per \",group.product.unit]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Quantity:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[group.total_quantity,\" \",group.product.unit]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Group Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"\\u20B9\",group.total_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Members:\"}),/*#__PURE__*/_jsx(\"span\",{children:group.members})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Created On:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(group.created_at)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewDetails(group),className:\"btn-secondary flex-1\",children:\"View Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAcceptAvailableGroup(group.id),className:\"btn-primary flex-1\",children:\"Accept Group\"})]})]})},group.id))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"No available groups found.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Groups will appear here when:\",/*#__PURE__*/_jsx(\"br\",{}),\"1. They reach \\u20B91000 total value\",/*#__PURE__*/_jsx(\"br\",{}),\"2. OR they have 10+ members\"]})]})}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loading groups...\"})}):filteredGroups.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 p-4 rounded-lg mb-6\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-800 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Note:\"}),\" Groups are visible when they meet at least one of these criteria:\",/*#__PURE__*/_jsx(\"br\",{}),\"1. \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"The product belongs to you as a seller\"}),\" (all your product groups are shown)\",/*#__PURE__*/_jsx(\"br\",{}),\"2. The group has \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"10 or more members\"}),/*#__PURE__*/_jsx(\"br\",{}),\"3. The total order value is \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"\\u20B91000 or more\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 p-3 rounded-md mb-6\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-1\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",clipRule:\"evenodd\"})}),\"Groups can be accepted anytime, but distribution will only happen on Saturday or Sunday.\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:filteredGroups.map(group=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-md overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:group.product.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-1 rounded-full \".concat(group.is_picked_up?'bg-green-100 text-green-800':group.is_accepted?'bg-blue-100 text-blue-800':group.members>=10||group.total_price>=1000?'bg-orange-100 text-orange-800':'bg-yellow-100 text-yellow-800'),children:group.is_picked_up?'Completed':group.is_accepted?'Accepted':group.members>=10||group.total_price>=1000?'Ready to Accept':'Locked'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm text-gray-600 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Price:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",group.product.price,\" per \",group.product.unit]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Quantity:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[group.total_quantity,\" \",group.product.unit]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Group Total:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"\\u20B9\",group.total_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Members:\"}),/*#__PURE__*/_jsx(\"span\",{children:group.members})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Locked On:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(group.locked_at)})]}),group.is_accepted&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Accepted On:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(group.accepted_at)})]}),group.is_picked_up&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Picked Up On:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(group.picked_up_at)})]})]}),activeTab==='locked'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAcceptGroup(group),className:\"btn-primary w-full\",children:\"Accept Group\"}),activeTab==='accepted'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 p-3 rounded-md mb-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-1\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",clipRule:\"evenodd\"})}),\"Pickup is only allowed on Saturday or Sunday\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVerifyPickup(group),className:\"btn-primary w-full\",children:\"Verify Pickup\"})]}),activeTab==='completed'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 p-3 rounded-md\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-green-800 flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 mr-1\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\",clipRule:\"evenodd\"})}),group.members===0?\"Completed (No members remaining)\":\"Completed on \".concat(formatDate(group.picked_up_at))]})})]})},group.id))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 mb-4\",children:[activeTab==='locked'&&'No locked groups or your own product groups waiting for acceptance.',activeTab==='accepted'&&'No accepted groups waiting for pickup.',activeTab==='completed'&&'No completed groups or groups with zero members yet.']}),activeTab==='locked'&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Groups will appear here when:\",/*#__PURE__*/_jsx(\"br\",{}),\"1. They are your own product groups (regardless of size or value)\",/*#__PURE__*/_jsx(\"br\",{}),\"2. OR they reach \\u20B91000 total value\",/*#__PURE__*/_jsx(\"br\",{}),\"3. OR they have 10+ members\"]})]}),showAcceptModal&&selectedGroup&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Accept Group Order\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4 text-gray-600\",children:[\"Are you sure you want to accept this group order for \",selectedGroup.product.name,\"?\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-3 rounded-md mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Quantity:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[selectedGroup.total_quantity,\" \",selectedGroup.product.unit]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Amount:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"\\u20B9\",selectedGroup.total_price.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Number of Customers:\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedGroup.members})]})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4\",children:\"By accepting, you agree to prepare this order for customer pickup.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAcceptModal(false),className:\"btn-secondary\",disabled:isAccepting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:confirmAcceptGroup,className:\"btn-primary\",disabled:isAccepting,children:isAccepting?'Accepting...':'Accept Order'})]})]})}),showDetailsModal&&selectedGroup&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:selectedGroup.product.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetailsModal(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium mb-2\",children:\"Product Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Price:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",selectedGroup.product.price,\" per \",selectedGroup.product.unit]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Category:\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedGroup.product.category}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"col-span-2\",children:selectedGroup.product.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium mb-2\",children:\"Group Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-2 text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Members:\"}),/*#__PURE__*/_jsx(\"span\",{children:selectedGroup.members}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Quantity:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[selectedGroup.total_quantity,\" \",selectedGroup.product.unit]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Total Value:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",selectedGroup.total_price.toFixed(2)]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Created On:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(selectedGroup.created_at)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Locked On:\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(selectedGroup.locked_at)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDetailsModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{handleAcceptAvailableGroup(selectedGroup.id);},className:\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700\",children:\"Accept Group\"})]})]})})}),showAcceptModal&&selectedGroup&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-md w-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Accept Group\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-6\",children:[\"Are you sure you want to accept this group for \",selectedGroup.product.name,\"?\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAcceptModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\",disabled:isAccepting,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:confirmAcceptGroup,className:\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center\",disabled:isAccepting,children:isAccepting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Processing...\"]}):'Accept Group'})]})]})})})]});};export default ViewGroups;","map":{"version":3,"names":["useEffect","useState","Link","useNavigate","toast","PageHeader","useAuth","groupAPI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ViewGroups","_user$seller2","user","groups","setGroups","isLoading","setIsLoading","activeTab","setActiveTab","selectedGroup","setSelectedGroup","showAcceptModal","setShowAcceptModal","isAccepting","setIsAccepting","availableGroups","setAvailableGroups","isLoadingAvailable","setIsLoadingAvailable","showDetailsModal","setShowDetailsModal","navigate","console","log","fetchGroups","fetchAvailableGroups","filteredGroups","filter","group","_group$product","isOwnProduct","id","product","seller_id","is_accepted","is_picked_up","locked_at","members","data","getMyGroups","error","errorMessage","detail","getAvailableGroups","filteredData","handleAcceptGroup","info","total_price","confirmAcceptGroup","handleViewDetails","handleAcceptAvailableGroup","groupId","find","g","lockGroup","lockError","_lockError$detail","includes","acceptGroup","success","concat","name","prevGroups","map","_objectSpread","accepted_at","Date","toISOString","handleVerifyPickup","formatDate","dateString","date","toLocaleDateString","year","month","day","_user$seller","_storedUser$seller","seller","paid_99","storedUser","JSON","parse","localStorage","getItem","className","children","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","to","title","subtitle","backButtonPath","onClick","length","price","unit","total_quantity","toFixed","created_at","fillRule","clipRule","picked_up_at","type","disabled","category","description","xmlns","cx","cy","r"],"sources":["E:/lockdeal/frontend/src/pages/seller/ViewGroups.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport PageHeader from '../../components/PageHeader';\nimport { useAuth } from '../../context/AuthContext';\nimport { groupAPI } from '../../services/api';\n\nconst ViewGroups = () => {\n  const { user } = useAuth();\n  const [groups, setGroups] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState('locked');\n  const [selectedGroup, setSelectedGroup] = useState(null);\n  const [showAcceptModal, setShowAcceptModal] = useState(false);\n  const [isAccepting, setIsAccepting] = useState(false);\n  const [availableGroups, setAvailableGroups] = useState([]);\n  const [isLoadingAvailable, setIsLoadingAvailable] = useState(true);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    console.log('ViewGroups component mounted');\n    console.log('Current user:', user);\n    fetchGroups();\n    fetchAvailableGroups();\n  }, []);\n  \n  // Define filteredGroups before using it in useEffect\n  const filteredGroups = groups.filter(group => {\n    // Check if the product belongs to the current seller\n    const isOwnProduct = user?.id && group.product?.seller_id === user.id;\n    \n    if (activeTab === 'locked') {\n      // For locked tab, show all seller's own products that are not accepted/picked up\n      // OR show locked groups from other sellers\n      return (isOwnProduct && !group.is_accepted && !group.is_picked_up) || \n             (group.locked_at && !group.is_accepted && !group.is_picked_up);\n    }\n    if (activeTab === 'accepted') {\n      // For accepted tab, show groups that are accepted, not picked up, and have at least 1 member\n      return group.is_accepted && !group.is_picked_up && group.members > 0;\n    }\n    if (activeTab === 'completed') {\n      // For completed tab, show groups that are picked up OR have 0 members\n      return group.is_picked_up || (group.is_accepted && group.members === 0);\n    }\n    if (activeTab === 'available') return false; // Available groups are handled separately\n    return true;\n  });\n  \n  // Add a useEffect to monitor groups state changes\n  useEffect(() => {\n    console.log('Groups state updated:', groups);\n    console.log('Active tab:', activeTab);\n    console.log('Filtered groups:', filteredGroups);\n  }, [groups, activeTab, filteredGroups]);\n\n  const fetchGroups = async () => {\n    setIsLoading(true);\n    try {\n      console.log('Fetching groups for seller...');\n      const data = await groupAPI.getMyGroups();\n      console.log('Groups data received:', data);\n      setGroups(data);\n    } catch (error) {\n      const errorMessage = error.detail || 'Failed to load groups';\n      toast.error(errorMessage);\n      console.error('Error fetching groups:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const fetchAvailableGroups = async () => {\n    setIsLoadingAvailable(true);\n    try {\n      console.log('Fetching available groups...');\n      const data = await groupAPI.getAvailableGroups();\n      console.log('Available groups data received:', data);\n      \n      // Filter out groups that are already accepted\n      const filteredData = data.filter(group => !group.is_accepted);\n      console.log('Filtered available groups (excluding accepted):', filteredData);\n      \n      setAvailableGroups(filteredData);\n    } catch (error) {\n      const errorMessage = error.detail || 'Failed to load available groups';\n      toast.error(errorMessage);\n      console.error('Error fetching available groups:', error);\n    } finally {\n      setIsLoadingAvailable(false);\n    }\n  };\n\n const handleAcceptGroup = (group) => {\n    setSelectedGroup(group);\n    \n    // Check if group is already accepted\n    if (group.is_accepted) {\n      toast.info('This group is already accepted');\n      return;\n    }\n    \n    // If group meets criteria, accept directly without showing modal\n    if (group.members >= 10 || group.total_price >= 1000) {\n      confirmAcceptGroup();\n    } else {\n      // For regular locked groups, show confirmation modal\n      setShowAcceptModal(true);\n    }\n  };\n  \n  const handleViewDetails = (group) => {\n    setSelectedGroup(group);\n    setShowDetailsModal(true);\n  };\n  \n  const handleAcceptAvailableGroup = async (groupId) => {\n    try {\n      // Check if the group meets the criteria\n      const group = selectedGroup || availableGroups.find(g => g.id === groupId);\n      \n      if (!group) {\n        toast.error('Group not found');\n        return;\n      }\n      \n      // Check if the group is already accepted\n      if (group.is_accepted) {\n        toast.info('This group is already accepted');\n        fetchGroups();\n        fetchAvailableGroups();\n        setShowDetailsModal(false);\n        setActiveTab('accepted');\n        return;\n      }\n      \n      // First lock the group if not already locked\n      if (!group.locked_at) {\n        try {\n          await groupAPI.lockGroup(groupId);\n          console.log('Group locked successfully');\n        } catch (lockError) {\n          // If the group is already locked, we can proceed to accept it\n          if (!lockError.detail?.includes('already locked')) {\n            // If it's another error, show it and stop\n            const errorMessage = lockError.detail || 'Failed to lock group';\n            toast.error(errorMessage);\n            console.error('Error locking group:', lockError);\n            return;\n          }\n        }\n      } else {\n        console.log('Group was already locked, proceeding to accept');\n      }\n      \n      // Then accept the group\n      await groupAPI.acceptGroup(groupId);\n      toast.success('Group accepted successfully');\n      setShowAcceptModal(false);\n      fetchGroups();\n      fetchAvailableGroups();\n      setShowDetailsModal(false);\n      setActiveTab('accepted');\n    } catch (error) {\n      const errorMessage = error.detail || 'Failed to accept group';\n      toast.error(errorMessage);\n      console.error('Error accepting group:', error);\n    }\n  };\n  const confirmAcceptGroup = async () => {\n    if (!selectedGroup) return;\n    \n    // Check if the group is already accepted\n    if (selectedGroup.is_accepted) {\n      toast.info(`Group for ${selectedGroup.product.name} is already accepted`);\n      setShowAcceptModal(false);\n      setActiveTab('accepted');\n      return;\n    }\n    \n    setIsAccepting(true);\n    try {\n      await groupAPI.acceptGroup(selectedGroup.id);\n      toast.success('Group accepted successfully');\n      \n      // Update the group status locally without showing popup\n      setGroups(prevGroups => {\n        return prevGroups.map(group => {\n          if (group.id === selectedGroup.id) {\n            return {\n              ...group,\n              is_accepted: true,\n              accepted_at: new Date().toISOString()\n            };\n          }\n          return group;\n        });\n      });\n      \n      // Refresh all groups to ensure the accepted group is correctly displayed\n      fetchGroups();\n      // Change active tab to 'accepted'\n      setActiveTab('accepted');\n      \n      toast.success(`Group for ${selectedGroup.product.name} accepted successfully!`);\n      setShowAcceptModal(false);\n    } catch (error) {\n      toast.error(error.detail || 'Failed to accept group');\n    } finally {\n      setIsAccepting(false);\n    }\n  };\n\n  const handleVerifyPickup = (group) => {\n    // Navigate to customer orders page for order confirmation\n    navigate('/seller/customer-orders');\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return 'Not locked yet';\n    const date = new Date(dateString);\n    return date.toLocaleDateString('en-IN', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  // Debug groups data\n  useEffect(() => {\n    console.log('ViewGroups - Groups data:', groups);\n    console.log('ViewGroups - Filtered groups:', filteredGroups);\n    console.log('ViewGroups - Active tab:', activeTab);\n  }, [groups, filteredGroups, activeTab]);\n\n  // Debug user state\n  useEffect(() => {\n    console.log('ViewGroups - Current user state:', user);\n    console.log('ViewGroups - Seller paid status:', user?.seller?.paid_99);\n    \n    // Check localStorage as well\n    const storedUser = JSON.parse(localStorage.getItem('user'));\n    console.log('ViewGroups - User from localStorage:', storedUser);\n    console.log('ViewGroups - Seller paid status from localStorage:', storedUser?.seller?.paid_99);\n  }, [user]);\n  \n  // If seller hasn't paid the fee, show access denied screen\n  if (!user?.seller?.paid_99) {\n    console.log('ViewGroups - Access denied: seller has not paid fee');\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8 border border-gray-200 text-center\">\n          <div className=\"inline-block p-4 rounded-full bg-red-100 text-red-600 mb-6\">\n            <svg className=\"h-16 w-16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m0 0v2m0-2h2m-2 0H9m3-4V8m-3 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">Access Denied</h1>\n          <p className=\"text-lg text-gray-600 mb-8 max-w-md mx-auto\">\n            You need to pay the seller onboarding fee of ₹99 to access group management features.\n          </p>\n          <Link \n            to=\"/seller/dashboard\" \n            className=\"inline-flex items-center justify-center px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200\"\n          >\n            <svg className=\"h-5 w-5 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z\" />\n            </svg>\n            Go to Dashboard & Pay Fee\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 animate-fade-in\">\n      <PageHeader\n        title=\"Manage Groups\"\n        subtitle=\"View and manage your product groups\"\n        backButtonPath=\"/seller/dashboard\"\n      />\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200 mb-6\">\n        <nav className=\"-mb-px flex space-x-8\">\n          <button\n            onClick={() => setActiveTab('locked')}\n            className={`pb-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'locked' ? 'border-primary-500 text-primary-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}\n          >\n            Locked Groups\n          </button>\n          <button\n            onClick={() => setActiveTab('accepted')}\n            className={`pb-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'accepted' ? 'border-primary-500 text-primary-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}\n          >\n            Accepted Groups\n          </button>\n          <button\n            onClick={() => setActiveTab('completed')}\n            className={`pb-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'completed' ? 'border-primary-500 text-primary-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}\n          >\n            Completed Groups\n          </button>\n          <button\n            onClick={() => setActiveTab('available')}\n            className={`pb-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'available' ? 'border-primary-500 text-primary-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}\n          >\n            Available Groups\n          </button>\n        </nav>\n      </div>\n\n      {/* Available Groups Tab Content */}\n      {activeTab === 'available' && (\n        <>\n          {isLoadingAvailable ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-gray-500\">Loading available groups...</p>\n            </div>\n          ) : availableGroups.length > 0 ? (\n            <>\n              <div className=\"bg-blue-50 p-4 rounded-lg mb-6\">\n                <p className=\"text-blue-800 text-sm\">\n                  <span className=\"font-medium\">Note:</span> These are groups created by customers that you can accept and fulfill.\n                  <br />Groups are visible when they meet at least one of these criteria:\n                  <br />1. The group has <span className=\"font-medium\">10 or more members</span>\n                  <br />2. The total order value is <span className=\"font-medium\">₹1000 or more</span>\n                </p>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {availableGroups.map((group) => (\n                  <div key={group.id} className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n                    <div className=\"p-6\">\n                      <div className=\"flex justify-between items-start mb-4\">\n                        <h2 className=\"text-lg font-semibold\">{group.product.name}</h2>\n                        <span className={`text-xs px-2 py-1 rounded-full ${(group.members >= 10 || group.total_price >= 1000) ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                          {(group.members >= 10 || group.total_price >= 1000) ? 'Ready to Accept' : 'Available'}\n                        </span>\n                      </div>\n\n                      <div className=\"space-y-2 text-sm text-gray-600 mb-4\">\n                        <div className=\"flex justify-between\">\n                          <span>Price:</span>\n                          <span>₹{group.product.price} per {group.product.unit}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Total Quantity:</span>\n                          <span>{group.total_quantity} {group.product.unit}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Group Total:</span>\n                          <span className=\"font-medium\">₹{group.total_price.toFixed(2)}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Members:</span>\n                          <span>{group.members}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span>Created On:</span>\n                          <span>{formatDate(group.created_at)}</span>\n                        </div>\n                      </div>\n\n                      <div className=\"flex space-x-2\">\n                        <button\n                          onClick={() => handleViewDetails(group)}\n                          className=\"btn-secondary flex-1\"\n                        >\n                          View Details\n                        </button>\n                        <button\n                          onClick={() => handleAcceptAvailableGroup(group.id)}\n                          className=\"btn-primary flex-1\"\n                        >\n                          Accept Group\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </>\n          ) : (\n            <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\n              <p className=\"text-gray-500 mb-4\">No available groups found.</p>\n              <p className=\"text-sm text-gray-600\">\n                Groups will appear here when:<br/>\n                1. They reach ₹1000 total value<br/>\n                2. OR they have 10+ members\n              </p>\n            </div>\n          )}\n        </>\n      )}\n\n      {isLoading ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500\">Loading groups...</p>\n        </div>\n      ) : filteredGroups.length > 0 ? (\n        <>\n          <div className=\"bg-blue-50 p-4 rounded-lg mb-6\">\n            <p className=\"text-blue-800 text-sm\">\n              <span className=\"font-medium\">Note:</span> Groups are visible when they meet at least one of these criteria:\n              <br />1. <span className=\"font-medium\">The product belongs to you as a seller</span> (all your product groups are shown)\n              <br />2. The group has <span className=\"font-medium\">10 or more members</span>\n              <br />3. The total order value is <span className=\"font-medium\">₹1000 or more</span>\n            </p>\n          </div>\n          <div className=\"bg-yellow-50 p-3 rounded-md mb-6\">\n            <p className=\"text-sm text-yellow-800 flex items-center\">\n              <svg className=\"h-5 w-5 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n              </svg>\n              Groups can be accepted anytime, but distribution will only happen on Saturday or Sunday.\n            </p>\n          </div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredGroups.map((group) => (\n            <div key={group.id} className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n              <div className=\"p-6\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <h2 className=\"text-lg font-semibold\">{group.product.name}</h2>\n                  <span className={`text-xs px-2 py-1 rounded-full ${group.is_picked_up ? 'bg-green-100 text-green-800' : group.is_accepted ? 'bg-blue-100 text-blue-800' : (group.members >= 10 || group.total_price >= 1000) ? 'bg-orange-100 text-orange-800' : 'bg-yellow-100 text-yellow-800'}`}>\n                    {group.is_picked_up ? 'Completed' : group.is_accepted ? 'Accepted' : (group.members >= 10 || group.total_price >= 1000) ? 'Ready to Accept' : 'Locked'}\n                  </span>\n                </div>\n\n                <div className=\"space-y-2 text-sm text-gray-600 mb-4\">\n                  <div className=\"flex justify-between\">\n                    <span>Price:</span>\n                    <span>₹{group.product.price} per {group.product.unit}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Total Quantity:</span>\n                    <span>{group.total_quantity} {group.product.unit}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Group Total:</span>\n                    <span className=\"font-medium\">₹{group.total_price.toFixed(2)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Members:</span>\n                    <span>{group.members}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>Locked On:</span>\n                    <span>{formatDate(group.locked_at)}</span>\n                  </div>\n                  {group.is_accepted && (\n                    <div className=\"flex justify-between\">\n                      <span>Accepted On:</span>\n                      <span>{formatDate(group.accepted_at)}</span>\n                    </div>\n                  )}\n                  {group.is_picked_up && (\n                    <div className=\"flex justify-between\">\n                      <span>Picked Up On:</span>\n                      <span>{formatDate(group.picked_up_at)}</span>\n                    </div>\n                  )}\n                </div>\n\n                {activeTab === 'locked' && (\n                  <button\n                    onClick={() => handleAcceptGroup(group)}\n                    className=\"btn-primary w-full\"\n                  >\n                    Accept Group\n                  </button>\n                )}\n\n                {activeTab === 'accepted' && (\n                  <>\n                    <div className=\"bg-yellow-50 p-3 rounded-md mb-3\">\n                      <p className=\"text-sm text-yellow-800 flex items-center\">\n                        <svg className=\"h-5 w-5 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                        </svg>\n                        Pickup is only allowed on Saturday or Sunday\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => handleVerifyPickup(group)}\n                      className=\"btn-primary w-full\"\n                    >\n                      Verify Pickup\n                    </button>\n                  </>\n                )}\n\n                {activeTab === 'completed' && (\n                  <div className=\"bg-green-50 p-3 rounded-md\">\n                    <p className=\"text-sm text-green-800 flex items-center\">\n                      <svg className=\"h-5 w-5 mr-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\n                      </svg>\n                      {group.members === 0 ? \n                        \"Completed (No members remaining)\" : \n                        `Completed on ${formatDate(group.picked_up_at)}`\n                      }\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n          </div>\n         </>\n      ) : (\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\n          <p className=\"text-gray-500 mb-4\">\n            {activeTab === 'locked' && 'No locked groups or your own product groups waiting for acceptance.'}\n            {activeTab === 'accepted' && 'No accepted groups waiting for pickup.'}\n            {activeTab === 'completed' && 'No completed groups or groups with zero members yet.'}\n          </p>\n          {activeTab === 'locked' && (\n            <p className=\"text-sm text-gray-600\">\n              Groups will appear here when:<br/>\n              1. They are your own product groups (regardless of size or value)<br/>\n              2. OR they reach ₹1000 total value<br/>\n              3. OR they have 10+ members\n            </p>\n          )}\n        </div>\n      )}\n\n      {/* Accept Group Modal */}\n      {showAcceptModal && selectedGroup && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\n            <h2 className=\"text-xl font-bold mb-4\">Accept Group Order</h2>\n            <p className=\"mb-4 text-gray-600\">\n              Are you sure you want to accept this group order for {selectedGroup.product.name}?\n            </p>\n            <div className=\"bg-gray-50 p-3 rounded-md mb-4\">\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Total Quantity:</span>\n                  <span>{selectedGroup.total_quantity} {selectedGroup.product.unit}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Total Amount:</span>\n                  <span className=\"font-medium\">₹{selectedGroup.total_price.toFixed(2)}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-600\">Number of Customers:</span>\n                  <span>{selectedGroup.members}</span>\n                </div>\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-600 mb-4\">\n              By accepting, you agree to prepare this order for customer pickup.\n            </p>\n            <div className=\"flex justify-end space-x-3\">\n              <button\n                type=\"button\"\n                onClick={() => setShowAcceptModal(false)}\n                className=\"btn-secondary\"\n                disabled={isAccepting}\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                onClick={confirmAcceptGroup}\n                className=\"btn-primary\"\n                disabled={isAccepting}\n              >\n                {isAccepting ? 'Accepting...' : 'Accept Order'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* OTP Verification Modal removed */}\n    \n      {/* Group Details Modal */}\n      {showDetailsModal && selectedGroup && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-start mb-4\">\n                <h2 className=\"text-xl font-semibold\">{selectedGroup.product.name}</h2>\n                <button\n                  onClick={() => setShowDetailsModal(false)}\n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <div className=\"space-y-4 mb-6\">\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <h3 className=\"font-medium mb-2\">Product Details</h3>\n                  <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                    <span className=\"text-gray-600\">Price:</span>\n                    <span>₹{selectedGroup.product.price} per {selectedGroup.product.unit}</span>\n                    <span className=\"text-gray-600\">Category:</span>\n                    <span>{selectedGroup.product.category}</span>\n                    <span className=\"text-gray-600\">Description:</span>\n                    <span className=\"col-span-2\">{selectedGroup.product.description}</span>\n                  </div>\n                </div>\n                \n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <h3 className=\"font-medium mb-2\">Group Details</h3>\n                  <div className=\"grid grid-cols-2 gap-2 text-sm\">\n                    <span className=\"text-gray-600\">Total Members:</span>\n                    <span>{selectedGroup.members}</span>\n                    <span className=\"text-gray-600\">Total Quantity:</span>\n                    <span>{selectedGroup.total_quantity} {selectedGroup.product.unit}</span>\n                    <span className=\"text-gray-600\">Total Value:</span>\n                    <span>₹{selectedGroup.total_price.toFixed(2)}</span>\n                    <span className=\"text-gray-600\">Created On:</span>\n                    <span>{formatDate(selectedGroup.created_at)}</span>\n                    <span className=\"text-gray-600\">Locked On:</span>\n                    <span>{formatDate(selectedGroup.locked_at)}</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  onClick={() => setShowDetailsModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\"\n                >\n                  Close\n                </button>\n                <button\n                  onClick={() => {\n                    handleAcceptAvailableGroup(selectedGroup.id);\n                  }}\n                  className=\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700\"\n                >\n                  Accept Group\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Accept Group Confirmation Modal */}\n      {showAcceptModal && selectedGroup && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full\">\n            <div className=\"p-6\">\n              <h2 className=\"text-xl font-semibold mb-4\">Accept Group</h2>\n              <p className=\"mb-6\">\n                Are you sure you want to accept this group for {selectedGroup.product.name}?\n              </p>\n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  onClick={() => setShowAcceptModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\"\n                  disabled={isAccepting}\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={confirmAcceptGroup}\n                  className=\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 flex items-center\"\n                  disabled={isAccepting}\n                >\n                  {isAccepting ? (\n                    <>\n                      <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                      </svg>\n                      Processing...\n                    </>\n                  ) : (\n                    'Accept Group'\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ViewGroups;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}