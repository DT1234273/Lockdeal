{"ast":null,"code":"import React from'react';import{Navigate,Outlet,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';// This component is used to protect routes that require authentication\n// It also checks if the user has the correct role to access the route\nimport{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{allowedRoles}=_ref;const{user,isAuthenticated}=useAuth();const location=useLocation();// If user is not authenticated, redirect to login\nif(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// If allowedRoles is specified, check if user has the required role\nif(allowedRoles&&!allowedRoles.includes(user.role)){// Redirect to the appropriate dashboard based on user role\nconst redirectPath=user.role==='customer'?'/customer/dashboard':'/seller/dashboard';return/*#__PURE__*/_jsx(Navigate,{to:redirectPath,replace:true});}// If user is authenticated and has the required role, render the child routes\nreturn/*#__PURE__*/_jsx(Outlet,{});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","Outlet","useLocation","useAuth","jsx","_jsx","ProtectedRoute","_ref","allowedRoles","user","isAuthenticated","location","to","state","from","replace","includes","role","redirectPath"],"sources":["E:/market_sell/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate, Outlet, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\n// This component is used to protect routes that require authentication\n// It also checks if the user has the correct role to access the route\nconst ProtectedRoute = ({ allowedRoles }) => {\n  const { user, isAuthenticated } = useAuth();\n  const location = useLocation();\n\n  // If user is not authenticated, redirect to login\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // If allowedRoles is specified, check if user has the required role\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\n    // Redirect to the appropriate dashboard based on user role\n    const redirectPath = user.role === 'customer' ? '/customer/dashboard' : '/seller/dashboard';\n    return <Navigate to={redirectPath} replace />;\n  }\n\n  // If user is authenticated and has the required role, render the child routes\n  return <Outlet />;\n};\n\nexport default ProtectedRoute;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,MAAM,CAAEC,WAAW,KAAQ,kBAAkB,CAChE,OAASC,OAAO,KAAQ,wBAAwB,CAEhD;AACA;AAAA,OAAAC,GAAA,IAAAC,IAAA,yBACA,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAsB,IAArB,CAAEC,YAAa,CAAC,CAAAD,IAAA,CACtC,KAAM,CAAEE,IAAI,CAAEC,eAAgB,CAAC,CAAGP,OAAO,CAAC,CAAC,CAC3C,KAAM,CAAAQ,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B;AACA,GAAI,CAACQ,eAAe,CAAE,CACpB,mBAAOL,IAAA,CAACL,QAAQ,EAACY,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEH,QAAS,CAAE,CAACI,OAAO,MAAE,CAAC,CACpE,CAEA;AACA,GAAIP,YAAY,EAAI,CAACA,YAAY,CAACQ,QAAQ,CAACP,IAAI,CAACQ,IAAI,CAAC,CAAE,CACrD;AACA,KAAM,CAAAC,YAAY,CAAGT,IAAI,CAACQ,IAAI,GAAK,UAAU,CAAG,qBAAqB,CAAG,mBAAmB,CAC3F,mBAAOZ,IAAA,CAACL,QAAQ,EAACY,EAAE,CAAEM,YAAa,CAACH,OAAO,MAAE,CAAC,CAC/C,CAEA;AACA,mBAAOV,IAAA,CAACJ,MAAM,GAAE,CAAC,CACnB,CAAC,CAED,cAAe,CAAAK,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}