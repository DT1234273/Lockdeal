{"ast":null,"code":"import React,{useEffect}from'react';import{Routes,Route,Navigate}from'react-router-dom';// Pages\n// Public Pages\nimport Home from'./pages/Home';import Login from'./pages/Login';import Register from'./pages/Register';import OTPVerification from'./pages/OTPVerification';// Customer Components\nimport CustomerDashboard from'./pages/customer/Dashboard';import CustomerProducts from'./pages/customer/Products';import CustomerGroupStatus from'./pages/customer/GroupStatus';import CustomerProfile from'./pages/customer/CustomerProfile';import Reviews from'./pages/customer/Reviews';// Seller Components\nimport SellerDashboard from'./pages/seller/Dashboard';import SellerUploadProduct from'./pages/seller/UploadProduct';import SellerViewGroups from'./pages/seller/ViewGroups';import SellerVerifyOTP from'./pages/seller/VerifyOTP';import SellerRatings from'./pages/seller/Ratings';import SellerAvailableGroups from'./pages/seller/AvailableGroups';import CustomerOrders from'./pages/seller/CustomerOrders';// Layout Components\nimport CustomerLayout from'./components/layouts/CustomerLayout';import SellerLayout from'./components/layouts/SellerLayout';import Layout from'./components/Layout';// Auth Context\nimport{useAuth}from'./context/AuthContext';import ProtectedRoute from'./components/ProtectedRoute';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const{user,fetchUserProfile}=useAuth();// Global user data refresh mechanism\nuseEffect(()=>{// Refresh user data every time App component mounts\nconst refreshUserData=async()=>{try{if(user){console.log('App: Refreshing user data...');const profileData=await fetchUserProfile();console.log('App: User data refreshed:',profileData);}}catch(error){console.error('App: Failed to refresh user data:',error);}};refreshUserData();},[user,fetchUserProfile]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(Layout,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/otp\",element:/*#__PURE__*/_jsx(OTPVerification,{})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/customer\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['customer'],children:/*#__PURE__*/_jsx(CustomerLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/customer/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(CustomerDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"products\",element:/*#__PURE__*/_jsx(CustomerProducts,{})}),/*#__PURE__*/_jsx(Route,{path:\"group-status\",element:/*#__PURE__*/_jsx(CustomerGroupStatus,{})}),/*#__PURE__*/_jsx(Route,{path:\"profile\",element:/*#__PURE__*/_jsx(CustomerProfile,{})}),/*#__PURE__*/_jsx(Route,{path:\"reviews\",element:/*#__PURE__*/_jsx(Reviews,{})})]}),/*#__PURE__*/_jsxs(Route,{path:\"/seller\",element:/*#__PURE__*/_jsx(ProtectedRoute,{allowedRoles:['seller'],children:/*#__PURE__*/_jsx(SellerLayout,{})}),children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Navigate,{to:\"/seller/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"dashboard\",element:/*#__PURE__*/_jsx(SellerDashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"upload-product\",element:/*#__PURE__*/_jsx(SellerUploadProduct,{})}),/*#__PURE__*/_jsx(Route,{path:\"view-groups\",element:/*#__PURE__*/_jsx(SellerViewGroups,{})}),/*#__PURE__*/_jsx(Route,{path:\"available-groups\",element:/*#__PURE__*/_jsx(SellerAvailableGroups,{})}),/*#__PURE__*/_jsx(Route,{path:\"verify-otp\",element:/*#__PURE__*/_jsx(SellerVerifyOTP,{})}),/*#__PURE__*/_jsx(Route,{path:\"ratings\",element:/*#__PURE__*/_jsx(SellerRatings,{})}),/*#__PURE__*/_jsx(Route,{path:\"/seller/customer-orders\",element:/*#__PURE__*/_jsx(CustomerOrders,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","useEffect","Routes","Route","Navigate","Home","Login","Register","OTPVerification","CustomerDashboard","CustomerProducts","CustomerGroupStatus","CustomerProfile","Reviews","SellerDashboard","SellerUploadProduct","SellerViewGroups","SellerVerifyOTP","SellerRatings","SellerAvailableGroups","CustomerOrders","CustomerLayout","SellerLayout","Layout","useAuth","ProtectedRoute","jsx","_jsx","jsxs","_jsxs","App","user","fetchUserProfile","refreshUserData","console","log","profileData","error","className","children","element","path","allowedRoles","index","to","replace"],"sources":["E:/market_sell/frontend/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\n\n// Pages\n\n// Public Pages\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport OTPVerification from './pages/OTPVerification';\n\n// Customer Components\nimport CustomerDashboard from './pages/customer/Dashboard';\nimport CustomerProducts from './pages/customer/Products';\nimport CustomerGroupStatus from './pages/customer/GroupStatus';\nimport CustomerProfile from './pages/customer/CustomerProfile';\nimport Reviews from './pages/customer/Reviews';\n\n// Seller Components\nimport SellerDashboard from './pages/seller/Dashboard';\nimport SellerUploadProduct from './pages/seller/UploadProduct';\nimport SellerViewGroups from './pages/seller/ViewGroups';\nimport SellerVerifyOTP from './pages/seller/VerifyOTP';\nimport SellerRatings from './pages/seller/Ratings';\nimport SellerAvailableGroups from './pages/seller/AvailableGroups';\nimport CustomerOrders from './pages/seller/CustomerOrders';\n\n// Layout Components\nimport CustomerLayout from './components/layouts/CustomerLayout';\nimport SellerLayout from './components/layouts/SellerLayout';\nimport Layout from './components/Layout';\n\n// Auth Context\nimport { useAuth } from './context/AuthContext';\nimport ProtectedRoute from './components/ProtectedRoute';\n\n\n\nfunction App() {\n  const { user, fetchUserProfile } = useAuth();\n  \n  // Global user data refresh mechanism\n  useEffect(() => {\n    // Refresh user data every time App component mounts\n    const refreshUserData = async () => {\n      try {\n        if (user) {\n          console.log('App: Refreshing user data...');\n          const profileData = await fetchUserProfile();\n          console.log('App: User data refreshed:', profileData);\n        }\n      } catch (error) {\n        console.error('App: Failed to refresh user data:', error);\n      }\n    };\n    \n    refreshUserData();\n  }, [user, fetchUserProfile]);\n  \n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Routes>\n        {/* Public Routes */}\n        <Route element={<Layout />}>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/register\" element={<Register />} />\n          <Route path=\"/otp\" element={<OTPVerification />} />\n        </Route>\n        \n        {/* Customer Routes */}\n        <Route \n          path=\"/customer\" \n          element={\n            <ProtectedRoute allowedRoles={['customer']}>\n              <CustomerLayout />\n            </ProtectedRoute>\n          }\n        >\n          <Route index element={<Navigate to=\"/customer/dashboard\" replace />} />\n          <Route path=\"dashboard\" element={<CustomerDashboard />} />\n          <Route path=\"products\" element={<CustomerProducts />} />\n          <Route path=\"group-status\" element={<CustomerGroupStatus />} />\n          <Route path=\"profile\" element={<CustomerProfile />} />\n          <Route path=\"reviews\" element={<Reviews />} />\n        </Route>\n        \n        {/* Seller Routes */}\n        <Route \n          path=\"/seller\" \n          element={\n            <ProtectedRoute allowedRoles={['seller']}>\n              <SellerLayout />\n            </ProtectedRoute>\n          }\n        >\n          <Route index element={<Navigate to=\"/seller/dashboard\" replace />} />\n          <Route path=\"dashboard\" element={<SellerDashboard />} />\n          <Route path=\"upload-product\" element={<SellerUploadProduct />} />\n          <Route path=\"view-groups\" element={<SellerViewGroups />} />\n          <Route path=\"available-groups\" element={<SellerAvailableGroups />} />\n          <Route path=\"verify-otp\" element={<SellerVerifyOTP />} />\n          <Route path=\"ratings\" element={<SellerRatings />} />\n          <Route path=\"/seller/customer-orders\" element={<CustomerOrders />} />\n        </Route>\n        \n        {/* Catch-all Route */}\n        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}