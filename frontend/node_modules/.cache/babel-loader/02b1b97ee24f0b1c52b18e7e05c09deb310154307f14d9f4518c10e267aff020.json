{"ast":null,"code":"import{createContext,useContext,useEffect,useState}from'react';import axios from'../services/axiosConfig';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>useContext(AuthContext);export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(true);const[tempEmail,setTempEmail]=useState('');// Customer address state\nconst[customerAddress,setCustomerAddress]=useState(null);const fetchUserProfile=async()=>{try{const response=await axios.get('/api/auth/profile');return response.data;}catch(error){var _error$response;throw((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||{detail:'An error occurred while fetching user profile'};}};useEffect(()=>{// Check if user is already logged in\nconst token=localStorage.getItem('token');const userData=localStorage.getItem('user');if(token&&userData){const parsedUserData=JSON.parse(userData);setUser(parsedUserData);setIsAuthenticated(true);// Fetch complete user profile if we have a token\nif(parsedUserData&&parsedUserData.id){fetchUserProfile().then(profileData=>{// Update user data with complete profile\nconst updatedUserData={...parsedUserData,...profileData};setUser(updatedUserData);localStorage.setItem('user',JSON.stringify(updatedUserData));}).catch(error=>{console.error('Failed to fetch user profile:',error);});}// Token is handled by axios interceptors in axiosConfig.js\n}setLoading(false);},[]);const login=async(email,password)=>{try{const response=await axios.post('/api/auth/login',{email,password});setTempEmail(email);return response.data;}catch(error){var _error$response2;throw((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||{detail:'An error occurred during login'};}};const register=async(name,email,password,confirmPassword,role)=>{try{const response=await axios.post('/api/auth/register',{name,email,password,confirm_password:confirmPassword,role});setTempEmail(email);return response.data;}catch(error){var _error$response3;throw((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data)||{detail:'An error occurred during registration'};}};const resendOTP=async email=>{try{const response=await axios.post('/api/auth/resend-otp',{email});return response.data;}catch(error){var _error$response4;throw((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.data)||{detail:'An error occurred while resending OTP'};}};const verifyOTP=async(email,otp_code)=>{try{const response=await axios.post('/api/auth/verify-otp',{email,otp_code});const{access_token,user_id,role}=response.data;// Save token and user data\nlocalStorage.setItem('token',access_token);const userData={id:user_id,email,role};localStorage.setItem('user',JSON.stringify(userData));// Set user in state\nsetUser(userData);setIsAuthenticated(true);// Token is handled by axios interceptors in axiosConfig.js\n// Fetch complete user profile after successful login\ntry{const profileData=await fetchUserProfile();const updatedUserData={...userData,...profileData};setUser(updatedUserData);localStorage.setItem('user',JSON.stringify(updatedUserData));// If user is a seller, create seller profile if it doesn't exist\nif(role==='seller'&&!profileData.seller){console.log('Creating seller profile for user:',user_id);try{// Default seller data\nconst defaultSellerData={shop_name:profileData.name+\"'s Shop\",address:\"\",contact:\"\"};// Register seller profile\nawait registerSeller(defaultSellerData);// Fetch updated profile after seller registration\nconst updatedProfileData=await fetchUserProfile();const finalUserData={...updatedUserData,...updatedProfileData};setUser(finalUserData);localStorage.setItem('user',JSON.stringify(finalUserData));}catch(sellerError){console.error('Failed to create seller profile:',sellerError);}}}catch(profileError){console.error('Failed to fetch user profile:',profileError);}return response.data;}catch(error){var _error$response5;throw((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.data)||{detail:'An error occurred during OTP verification'};}};const logout=()=>{// Remove token and user data\nlocalStorage.removeItem('token');localStorage.removeItem('user');// Reset state\nsetUser(null);setIsAuthenticated(false);// Token removal is handled by axios interceptors in axiosConfig.js\n};const registerSeller=async sellerData=>{try{console.log('Registering seller with data:',sellerData);console.log('User ID:',user.id);const response=await axios.post(`/api/auth/register-seller?user_id=${user.id}`,sellerData);console.log('Seller registration response:',response.data);return response.data;}catch(error){var _error$response6;console.error('Seller registration error:',error);throw((_error$response6=error.response)===null||_error$response6===void 0?void 0:_error$response6.data)||{detail:'An error occurred during seller registration'};}};const updateSellerAddress=async addressData=>{try{console.log('Updating seller address for user ID:',user.id);const response=await axios.put('/api/auth/update-seller-profile',{address:addressData.address,contact:addressData.contact});// Fetch updated profile after address update\nconst profileData=await fetchUserProfile();const updatedUserData={...user,...profileData};setUser(updatedUserData);localStorage.setItem('user',JSON.stringify(updatedUserData));return response.data;}catch(error){var _error$response7;console.error('Failed to update seller address:',error);throw((_error$response7=error.response)===null||_error$response7===void 0?void 0:_error$response7.data)||{detail:'An error occurred while updating seller address'};}};const updateCustomerAddress=async addressData=>{try{// Store address in local storage for now (frontend-only implementation)\n// In a real implementation, this would call a backend API endpoint\nsetCustomerAddress(addressData);// Update the user object with the address information\nconst updatedUserData={...user,customerAddress:addressData};setUser(updatedUserData);localStorage.setItem('customerAddress',JSON.stringify(addressData));localStorage.setItem('user',JSON.stringify(updatedUserData));toast.success('Address updated successfully!');return{success:true,message:'Address updated successfully'};}catch(error){var _error$response8;console.error('Failed to update customer address:',error);toast.error('Failed to update address. Please try again.');throw((_error$response8=error.response)===null||_error$response8===void 0?void 0:_error$response8.data)||{detail:'An error occurred while updating customer address'};}};const paySellerFee=async()=>{try{console.log('Processing payment for user ID:',user.id);const response=await axios.post(`/api/auth/pay-seller-fee/${user.id}`);console.log('Payment successful, updating user data...');console.log('Payment response:',response.data);console.log('Current user state:',user);// Use the seller data from the response if available\nconst sellerFromResponse=response.data.seller;// Always fetch the complete profile after payment to ensure we have the latest data\ntry{const profileData=await fetchUserProfile();console.log('Fetched profile data:',profileData);// Create updated user with paid_99 set to true\nconst updatedUserData={...user,...profileData,seller:{...(profileData.seller||{}),paid_99:true}};console.log('Updated user data:',updatedUserData);// Update state and localStorage\nsetUser(updatedUserData);localStorage.setItem('user',JSON.stringify(updatedUserData));}catch(profileError){console.error('Failed to fetch updated user profile:',profileError);// Fallback: Use seller data from response if available\nif(sellerFromResponse&&sellerFromResponse.paid_99){console.log('Using seller data from response as fallback');const updatedSeller={...user.seller,paid_99:sellerFromResponse.paid_99};const updatedUser={...user,seller:updatedSeller};setUser(updatedUser);localStorage.setItem('user',JSON.stringify(updatedUser));}else{// Last resort fallback\nconsole.log('Using hardcoded fallback for seller data');const updatedSeller={...user.seller,paid_99:true};const updatedUser={...user,seller:updatedSeller};setUser(updatedUser);localStorage.setItem('user',JSON.stringify(updatedUser));}}return response.data;}catch(error){var _error$response9;console.error('Payment error:',error);throw((_error$response9=error.response)===null||_error$response9===void 0?void 0:_error$response9.data)||{detail:'An error occurred during payment. Please try again.'};}};// Load customer address from localStorage on initialization\nuseEffect(()=>{const savedAddress=localStorage.getItem('customerAddress');if(savedAddress){try{setCustomerAddress(JSON.parse(savedAddress));}catch(error){console.error('Failed to parse saved customer address:',error);}}},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,isAuthenticated,loading,tempEmail,customerAddress,login,register,verifyOTP,resendOTP,logout,registerSeller,updateSellerAddress,updateCustomerAddress,paySellerFee,fetchUserProfile,setTempEmail},children:!loading&&children});};","map":{"version":3,"names":["createContext","useContext","useEffect","useState","axios","toast","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","user","setUser","isAuthenticated","setIsAuthenticated","loading","setLoading","tempEmail","setTempEmail","customerAddress","setCustomerAddress","fetchUserProfile","response","get","data","error","_error$response","detail","token","localStorage","getItem","userData","parsedUserData","JSON","parse","id","then","profileData","updatedUserData","setItem","stringify","catch","console","login","email","password","post","_error$response2","register","name","confirmPassword","role","confirm_password","_error$response3","resendOTP","_error$response4","verifyOTP","otp_code","access_token","user_id","seller","log","defaultSellerData","shop_name","address","contact","registerSeller","updatedProfileData","finalUserData","sellerError","profileError","_error$response5","logout","removeItem","sellerData","_error$response6","updateSellerAddress","addressData","put","_error$response7","updateCustomerAddress","success","message","_error$response8","paySellerFee","sellerFromResponse","paid_99","updatedSeller","updatedUser","_error$response9","savedAddress","Provider","value"],"sources":["E:/market_sell/frontend/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from 'react';\nimport axios from '../services/axiosConfig';\nimport { toast } from 'react-toastify';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [tempEmail, setTempEmail] = useState('');\n  \n  // Customer address state\n  const [customerAddress, setCustomerAddress] = useState(null);\n  \n  const fetchUserProfile = async () => {\n    try {\n      const response = await axios.get('/api/auth/profile');\n      return response.data;\n    } catch (error) {\n      throw error.response?.data || { detail: 'An error occurred while fetching user profile' };\n    }\n  };\n  \n  useEffect(() => {\n    // Check if user is already logged in\n    const token = localStorage.getItem('token');\n    const userData = localStorage.getItem('user');\n    \n    if (token && userData) {\n      const parsedUserData = JSON.parse(userData);\n      setUser(parsedUserData);\n      setIsAuthenticated(true);\n      \n      // Fetch complete user profile if we have a token\n      if (parsedUserData && parsedUserData.id) {\n        fetchUserProfile()\n          .then(profileData => {\n            // Update user data with complete profile\n            const updatedUserData = { ...parsedUserData, ...profileData };\n            setUser(updatedUserData);\n            localStorage.setItem('user', JSON.stringify(updatedUserData));\n          })\n          .catch(error => {\n            console.error('Failed to fetch user profile:', error);\n          });\n      }\n      \n      // Token is handled by axios interceptors in axiosConfig.js\n    }\n    \n    setLoading(false);\n  }, []);\n  \n  const login = async (email, password) => {\n    try {\n      const response = await axios.post('/api/auth/login', { email, password });\n      setTempEmail(email);\n      return response.data;\n    } catch (error) {\n      throw error.response?.data || { detail: 'An error occurred during login' };\n    }\n  };\n  \n  const register = async (name, email, password, confirmPassword, role) => {\n    try {\n      const response = await axios.post('/api/auth/register', { name, email, password, confirm_password: confirmPassword, role });\n      setTempEmail(email);\n      return response.data;\n    } catch (error) {\n      throw error.response?.data || { detail: 'An error occurred during registration' };\n    }\n  };\n  \n  const resendOTP = async (email) => {\n    try {\n      const response = await axios.post('/api/auth/resend-otp', { email });\n      return response.data;\n    } catch (error) {\n      throw error.response?.data || { detail: 'An error occurred while resending OTP' };\n    }\n  };\n\n  const verifyOTP = async (email, otp_code) => {\n    try {\n      const response = await axios.post('/api/auth/verify-otp', { email, otp_code });\n      const { access_token, user_id, role } = response.data;\n      \n      // Save token and user data\n      localStorage.setItem('token', access_token);\n      const userData = { id: user_id, email, role };\n      localStorage.setItem('user', JSON.stringify(userData));\n      \n      // Set user in state\n      setUser(userData);\n      setIsAuthenticated(true);\n      \n      // Token is handled by axios interceptors in axiosConfig.js\n      \n      // Fetch complete user profile after successful login\n      try {\n        const profileData = await fetchUserProfile();\n        const updatedUserData = { ...userData, ...profileData };\n        setUser(updatedUserData);\n        localStorage.setItem('user', JSON.stringify(updatedUserData));\n        \n        // If user is a seller, create seller profile if it doesn't exist\n        if (role === 'seller' && !profileData.seller) {\n          console.log('Creating seller profile for user:', user_id);\n          try {\n            // Default seller data\n            const defaultSellerData = {\n              shop_name: profileData.name + \"'s Shop\",\n              address: \"\",\n              contact: \"\"\n            };\n            \n            // Register seller profile\n            await registerSeller(defaultSellerData);\n            \n            // Fetch updated profile after seller registration\n            const updatedProfileData = await fetchUserProfile();\n            const finalUserData = { ...updatedUserData, ...updatedProfileData };\n            setUser(finalUserData);\n            localStorage.setItem('user', JSON.stringify(finalUserData));\n          } catch (sellerError) {\n            console.error('Failed to create seller profile:', sellerError);\n          }\n        }\n      } catch (profileError) {\n        console.error('Failed to fetch user profile:', profileError);\n      }\n      \n      return response.data;\n    } catch (error) {\n      throw error.response?.data || { detail: 'An error occurred during OTP verification' };\n    }\n  };\n  \n  const logout = () => {\n    // Remove token and user data\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    \n    // Reset state\n    setUser(null);\n    setIsAuthenticated(false);\n    \n    // Token removal is handled by axios interceptors in axiosConfig.js\n  };\n  \n  const registerSeller = async (sellerData) => {\n    try {\n      console.log('Registering seller with data:', sellerData);\n      console.log('User ID:', user.id);\n      const response = await axios.post(`/api/auth/register-seller?user_id=${user.id}`, sellerData);\n      console.log('Seller registration response:', response.data);\n      return response.data;\n    } catch (error) {\n      console.error('Seller registration error:', error);\n      throw error.response?.data || { detail: 'An error occurred during seller registration' };\n    }\n  };\n  \n  const updateSellerAddress = async (addressData) => {\n    try {\n      console.log('Updating seller address for user ID:', user.id);\n      const response = await axios.put('/api/auth/update-seller-profile', { \n        address: addressData.address,\n        contact: addressData.contact\n      });\n      \n      // Fetch updated profile after address update\n      const profileData = await fetchUserProfile();\n      const updatedUserData = { ...user, ...profileData };\n      setUser(updatedUserData);\n      localStorage.setItem('user', JSON.stringify(updatedUserData));\n      \n      return response.data;\n    } catch (error) {\n      console.error('Failed to update seller address:', error);\n      throw error.response?.data || { detail: 'An error occurred while updating seller address' };\n    }\n  };\n  \n  const updateCustomerAddress = async (addressData) => {\n    try {\n      // Store address in local storage for now (frontend-only implementation)\n      // In a real implementation, this would call a backend API endpoint\n      setCustomerAddress(addressData);\n      \n      // Update the user object with the address information\n      const updatedUserData = { \n        ...user, \n        customerAddress: addressData \n      };\n      \n      setUser(updatedUserData);\n      localStorage.setItem('customerAddress', JSON.stringify(addressData));\n      localStorage.setItem('user', JSON.stringify(updatedUserData));\n      \n      toast.success('Address updated successfully!');\n      return { success: true, message: 'Address updated successfully' };\n    } catch (error) {\n      console.error('Failed to update customer address:', error);\n      toast.error('Failed to update address. Please try again.');\n      throw error.response?.data || { detail: 'An error occurred while updating customer address' };\n    }\n  };\n  \n  const paySellerFee = async () => {\n    try {\n      console.log('Processing payment for user ID:', user.id);\n      const response = await axios.post(`/api/auth/pay-seller-fee/${user.id}`);\n      \n      console.log('Payment successful, updating user data...');\n      console.log('Payment response:', response.data);\n      console.log('Current user state:', user);\n      \n      // Use the seller data from the response if available\n      const sellerFromResponse = response.data.seller;\n      \n      // Always fetch the complete profile after payment to ensure we have the latest data\n      try {\n        const profileData = await fetchUserProfile();\n        console.log('Fetched profile data:', profileData);\n        \n        // Create updated user with paid_99 set to true\n        const updatedUserData = { \n          ...user, \n          ...profileData,\n          seller: {\n            ...(profileData.seller || {}),\n            paid_99: true\n          }\n        };\n        \n        console.log('Updated user data:', updatedUserData);\n        \n        // Update state and localStorage\n        setUser(updatedUserData);\n        localStorage.setItem('user', JSON.stringify(updatedUserData));\n      } catch (profileError) {\n        console.error('Failed to fetch updated user profile:', profileError);\n        \n        // Fallback: Use seller data from response if available\n        if (sellerFromResponse && sellerFromResponse.paid_99) {\n          console.log('Using seller data from response as fallback');\n          const updatedSeller = { ...user.seller, paid_99: sellerFromResponse.paid_99 };\n          const updatedUser = { ...user, seller: updatedSeller };\n          setUser(updatedUser);\n          localStorage.setItem('user', JSON.stringify(updatedUser));\n        } else {\n          // Last resort fallback\n          console.log('Using hardcoded fallback for seller data');\n          const updatedSeller = { ...user.seller, paid_99: true };\n          const updatedUser = { ...user, seller: updatedSeller };\n          setUser(updatedUser);\n          localStorage.setItem('user', JSON.stringify(updatedUser));\n        }\n      }\n      \n      return response.data;\n    } catch (error) {\n      console.error('Payment error:', error);\n      throw error.response?.data || { detail: 'An error occurred during payment. Please try again.' };\n    }\n  };\n  \n  // Load customer address from localStorage on initialization\n  useEffect(() => {\n    const savedAddress = localStorage.getItem('customerAddress');\n    if (savedAddress) {\n      try {\n        setCustomerAddress(JSON.parse(savedAddress));\n      } catch (error) {\n        console.error('Failed to parse saved customer address:', error);\n      }\n    }\n  }, []);\n  \n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isAuthenticated,\n        loading,\n        tempEmail,\n        customerAddress,\n        login,\n        register,\n        verifyOTP,\n        resendOTP,\n        logout,\n        registerSeller,\n        updateSellerAddress,\n        updateCustomerAddress,\n        paySellerFee,\n        fetchUserProfile,\n        setTempEmail\n      }}\n    >\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}